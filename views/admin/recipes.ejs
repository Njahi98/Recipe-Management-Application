<!DOCTYPE html>
<html lang="en">
  <%-include('../partials/head.ejs')%>
  <body>
    <%-include('../partials/nav.ejs') %>
    <div class="page-container">
      <div class="admin-layout">
        <aside class="admin-sidebar">
          <nav>
            <ul class="admin-menu">
              <li class="admin-menu-item">
                <a href="/admin/users" class="admin-menu-link">
                  <svg class="admin-menu-icon" viewBox="0 0 24 24">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                  </svg>
                  Users
                </a>
              </li>
              <li class="admin-menu-item">
                <a href="/admin/recipes" class="admin-menu-link active">
                  <svg class="admin-menu-icon" viewBox="0 0 24 24">
                    <path d="M15.5 14l-0.8 2.9-3.5-2.1-3.7 1.2-0.2-3.2-3.2-1 2.2-2.3-1.2-3 3.2-0.2 1.8-2.6 2.3 2.3 3-0.9 0.1 3.2 2.8 1.5-2.4 2.2 0.6 3z"/>
                  </svg>
                  Recipes
                </a>
              </li>
            </ul>
          </nav>
        </aside>
        
        <main class="admin-content">
          <h1 class="admin-title">Recipe Management</h1>
          
          <div class="admin-recipes-grid">
            <% recipes.forEach(recipe => { %>
              <div class="admin-recipe-card" data-id="<%= recipe._id %>">
                <img 
                  src="/recipes/image/<%= recipe.imageId %>" 
                  alt="<%= recipe.title %>" 
                  class="admin-recipe-image"
                  onerror="this.src='/images/default-recipe.png'"
                >
                <div class="admin-recipe-content">
                  <h3 class="admin-recipe-title"><%= recipe.title %></h3>
                    <%if(recipe.creator){ %>
                        <p class="admin-recipe-creator">Created by: <%= recipe.creator.username %></p>
               <%   }else{ %>
                        <p class="admin-recipe-creator">Created by Guest</p>

                 <%   } %>


                </div>
                <div class="admin-recipe-actions">
                  <button class="admin-btn admin-btn-view" data-recipedata="<%= recipe._id %>">View Details</button>
                  <button class="admin-btn admin-btn-delete" data-recipedata="<%= recipe._id %>" >Delete</button>
                </div>
              </div>
            <% }) %>
          </div>
        </main>
      </div>
    </div>


    <%-include('../partials/footer.ejs') %>

    <script type="module" src="/scripts/admin-recipe.js">

   </script>
  </body>
</html>